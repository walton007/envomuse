<div class="hbox hbox-auto-xs hbox-auto-sm" ng-init="init();" ng-controller="ChannelListCtrl">
  <!-- main -->
  <div class="col">

    <div class="row wrapper m-t-n">
      <div class="panel panel-default no-border">
        <accordion close-others="true">
          <accordion-group ng-repeat="row in channels">
            <accordion-heading>
              <span class="label bg-{{row.sitesCount>0?'info':'light'}} pull-right">{{row.sitesCount}}</span>
              <span class="label bg-{{row.bg}} m-r">{{row.type}}</span>{{row.name}}
            </accordion-heading>
            <form name="form" class="form-validation">
              <div class="panel panel-default">
                <div class="panel-body">
                  <div class="col-sm-3" ng-repeat="s in allSites" >
                    <div class="checkbox">
                      <label class="i-checks">
                        <input type="checkbox" value="{{s.siteName}}" ng-checked="s.channelId===row._id" ng-checked="checkedSites.indexOf(s.siteName)>-1" ng-click="chooseSite(s.siteName)">
                        <i></i>
                        {{s.siteName}}<small class="label bg-{{s.bg}} m-l-sm">{{s.channelName}}</small>
                      </label>
                    </div>
                  </div>
                </div>
                <footer class="panel-footer text-right bg-light lter">
                  <button type="submit" class="btn btn-success" ng-disabled="!formValid" ng-click="startBind(row._id)">关联</button>
                </footer>
              </div>
            </form>
          </accordion-group>
        </accordion>
      </div> 
    </div>
  </div>
  <!-- /main -->

</div>